<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Message</title>
    <link rel="stylesheet" href="styles.css?v=5">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="heart-bg"></div>
        <div class="content day-content">
            <h1 id="day-title" class="title"></h1>
            <div class="gif-container">
                <img id="day-image" src="" alt="Theme GIF" class="main-gif">
            </div>
            <p id="day-message" class="message visible"></p>
            
            <!-- Surprise Section -->
            <div id="surprise-section" style="margin-top: 2rem;">
                <button id="surpriseBtn" class="btn pulse-btn">✨ Click for a Surprise! ✨</button>
                <div id="surprise-container" class="hidden-surprise">
                    <p id="surprise-message" class="surprise-text"></p>
                    <div id="confetti-container"></div>
                </div>
            </div>

            <div class="buttons" style="margin-top: 2rem;">
                <button id="backBtn" class="btn no-btn">Back</button>
            </div>
        </div>
    </div>
    <script src="days-data.js"></script>
    <script>
        // Get the day ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const dayId = urlParams.get('id');
        
        const dayData = daysData.find(d => d.id === dayId);
        
        if (dayData) {
            document.getElementById('day-title').textContent = dayData.title;
            document.getElementById('day-message').textContent = dayData.message;
            document.getElementById('day-image').src = dayData.image;
            document.body.style.backgroundColor = `${dayData.color}22`; // Light version of theme color
            
            // Surprise Logic
            const surpriseBtn = document.getElementById('surpriseBtn');
            const surpriseContainer = document.getElementById('surprise-container');
            const surpriseMessage = document.getElementById('surprise-message');
            
            if (dayData.surprise) {
                surpriseMessage.textContent = dayData.surprise;
                surpriseBtn.style.backgroundColor = dayData.color;
                surpriseBtn.style.color = 'white';
                
                surpriseBtn.addEventListener('click', () => {
                    surpriseBtn.classList.add('hidden');
                    surpriseContainer.classList.remove('hidden-surprise');
                    surpriseContainer.classList.add('visible-surprise');
                    createConfetti(dayData.color);
                });
            } else {
                document.getElementById('surprise-section').style.display = 'none';
            }

            // Customize back button
            const backBtn = document.getElementById('backBtn');
            backBtn.style.borderColor = dayData.color;
            backBtn.style.color = dayData.color;
            
            backBtn.addEventListener('click', () => {
                window.location.href = 'timeline.html';
            });
        } else {
            // Fallback if id not found
            window.location.href = 'timeline.html';
        }

        // Add floating hearts
        function createHearts() {
            const heartBg = document.querySelector('.heart-bg');
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 3 + 's';
            heartBg.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }
        setInterval(createHearts, 300);

        function createConfetti(color) {
            const container = document.getElementById('confetti-container');
            const colors = [color, '#ff4d6d', '#ff8fa3', '#fff0f3', '#ffd700'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => confetti.remove(), 4000);
            }
        }
    </script>
</body>
</html>